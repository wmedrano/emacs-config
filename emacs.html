<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-05-27 Tue 22:16 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs Config</title>
<meta name="author" content="will@wmedrano.dev" />
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Emacs Config</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org506292a">1. Packages</a>
<ul>
<li><a href="#org474e88d">1.1. Melpa</a></li>
<li><a href="#orgeb633f1">1.2. Initialize</a></li>
</ul>
</li>
<li><a href="#org8c36c67">2. Startup</a></li>
<li><a href="#org7946504">3. File System</a>
<ul>
<li><a href="#org8e5fa82">3.1. Auto-Revert</a></li>
<li><a href="#orga328505">3.2. Backups &amp; Autosaves</a></li>
</ul>
</li>
<li><a href="#orge9d82c8">4. Performance</a></li>
<li><a href="#orgb914e67">5. Appearance &amp; Feel</a>
<ul>
<li><a href="#org0dfb651">5.1. Remove Clutter</a></li>
<li><a href="#org9cbbdcd">5.2. Lines</a></li>
<li><a href="#orga5af1bd">5.3. Color Scheme</a></li>
<li><a href="#orga00aa87">5.4. Modeline</a></li>
</ul>
</li>
<li><a href="#org1448e58">6. Editor Completions</a>
<ul>
<li><a href="#orgf777027">6.1. Ivy</a></li>
<li><a href="#orge93a936">6.2. Counsel</a></li>
</ul>
</li>
<li><a href="#orga9f7949">7. LSP</a>
<ul>
<li><a href="#org6b460af">7.1. Background</a></li>
<li><a href="#org4621dc4">7.2. Updating Eglot Package</a></li>
<li><a href="#orgc45444a">7.3. Obtaining Language Servers</a></li>
<li><a href="#org1f1cfbe">7.4. Enabling Eglot</a></li>
</ul>
</li>
<li><a href="#org147c1d0">8. Formatting</a>
<ul>
<li><a href="#orgb77b17d">8.1. Tabs</a></li>
<li><a href="#org4c6e6b8">8.2. Line Width</a></li>
<li><a href="#orgc0de00f">8.3. Delete Trailing Whitespace</a></li>
<li><a href="#orgf88a19e">8.4. Language Specific Autoformat</a></li>
</ul>
</li>
<li><a href="#org68ef613">9. Code Auto-Complete</a></li>
<li><a href="#orgaa83484">10. Languages</a>
<ul>
<li><a href="#org0b08594">10.1. Rust</a></li>
<li><a href="#org7f149ae">10.2. Org Mode</a></li>
</ul>
</li>
<li><a href="#orge7a83b3">11. Elisp Concepts</a>
<ul>
<li><a href="#orgdac3d8b">11.1. Interactive Commands</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org506292a" class="outline-2">
<h2 id="org506292a"><span class="section-number-2">1.</span> Packages</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org474e88d" class="outline-3">
<h3 id="org474e88d"><span class="section-number-3">1.1.</span> Melpa</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Add Melpa to the package manager. <a href="https://melpa.org">Melpa</a> contains many popular Emacs packages.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">package</span>)
(add-to-list 'package-archives '(<span style="color: #8b2252;">"melpa"</span> . <span style="color: #8b2252;">"https://melpa.org/packages/"</span>) t)
</pre>
</div>

<p>
Counting the default package archives, the following package archives are
available.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">cl-loop</span> for package-archive in package-archives
         collect (list (car package-archive) (cdr package-archive)))
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">gnu</td>
<td class="org-left"><a href="https://elpa.gnu.org/packages/">https://elpa.gnu.org/packages/</a></td>
</tr>

<tr>
<td class="org-left">nongnu</td>
<td class="org-left"><a href="https://elpa.nongnu.org/nongnu/">https://elpa.nongnu.org/nongnu/</a></td>
</tr>

<tr>
<td class="org-left">melpa</td>
<td class="org-left"><a href="https://melpa.org/packages/">https://melpa.org/packages/</a></td>
</tr>
</tbody>
</table>

<p>
Package archives must be manually refreshed or fetched with <code>M-x
package-refresh-contents</code>. All packages added to the <code>package-selected-packages</code>
variable can be installed with <code>M-x package-install-selected-packages</code>. Packages
can also be installed on a one-off basis interactively with <code>M-x
package-install</code>.
</p>

<p>
In some cases, package installation may fail with "&#x2026; not found". This likely
means that the package archives point to an old (and non-existant) version of
the package. The package definitions can be updated by running <code>M-x
package-refresh-contents</code>. Packages may also be upgraded all at once with <code>M-x
package-upgrade-all</code>.
</p>
</div>
</div>
<div id="outline-container-orgeb633f1" class="outline-3">
<h3 id="orgeb633f1"><span class="section-number-3">1.2.</span> Initialize</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Initialize the package archive. This makes all previously installed packages available.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(package-initialize)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8c36c67" class="outline-2">
<h2 id="org8c36c67"><span class="section-number-2">2.</span> Startup</h2>
<div class="outline-text-2" id="text-2">
<p>
Disable the default Emacs startup screen. Instead, this displays just the opened
file or the <code>*Scratch*</code> buffer if no file has been opened.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq-default</span> inhibit-startup-screen t)
</pre>
</div>
</div>
</div>
<div id="outline-container-org7946504" class="outline-2">
<h2 id="org7946504"><span class="section-number-2">3.</span> File System</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org8e5fa82" class="outline-3">
<h3 id="org8e5fa82"><span class="section-number-3">3.1.</span> Auto-Revert</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Auto revert mode automatically reloads file-based buffer's when their files have
been updated.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-auto-revert-mode t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga328505" class="outline-3">
<h3 id="orga328505"><span class="section-number-3">3.2.</span> Backups &amp; Autosaves</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Backup and autosaves may litter the filesystem so we disable
them. This is ok as my disk is reliable, I save often, and use version
control.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq-default</span> auto-save-interval 0
              create-lockfiles   nil
              make-backup-files  nil)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge9d82c8" class="outline-2">
<h2 id="orge9d82c8"><span class="section-number-2">4.</span> Performance</h2>
<div class="outline-text-2" id="text-4">
<p>
Increase the amount of memory allowed before garbage collection kicks in. Emacs
runs garbage collection when it is over the limit. The limit is equal to the
amount of memory that is <code>actively-used</code> plus <code>used-memory *
gc-cons-percentage</code>. Once the limit is reached, Emacs runs garbage collection
and recomputes the amount of memory that is <code>actively-used</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq-default</span> gc-cons-percentage 1.0)
</pre>
</div>

<p>
Run the garbage collector on idle, every 3 seconds. This reduces the chances of
a GC run when interacting with Emacs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(run-with-idle-timer 3 t #'garbage-collect)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb914e67" class="outline-2">
<h2 id="orgb914e67"><span class="section-number-2">5.</span> Appearance &amp; Feel</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org0dfb651" class="outline-3">
<h3 id="org0dfb651"><span class="section-number-3">5.1.</span> Remove Clutter</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Remove the menu bar and tool bar.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(menu-bar-mode -1)
(tool-bar-mode -1)
</pre>
</div>

<p>
Disable the scroll bar. The functionality is ok sometimes, but it clashes with
the theming.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(scroll-bar-mode -1)
</pre>
</div>
</div>
</div>
<div id="outline-container-org9cbbdcd" class="outline-3">
<h3 id="org9cbbdcd"><span class="section-number-3">5.2.</span> Lines</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Scroll conservatively values above 100 cause Emacs to scroll the
minimum number of lines required to get the cursor in position. The
default value of 0 causes Emacs to recenter the window.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq-default</span> scroll-conservatively 101)
</pre>
</div>

<p>
Display line numbers for text buffers. This can be toggled in an individual
buffer with <code>M-x display-line-numbers-mode</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-display-line-numbers-mode t)
</pre>
</div>

<p>
Highlight the currently selected line. This can be toggled in an individual
buffer with <code>M-x hl-line-mode</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-hl-line-mode t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga5af1bd" class="outline-3">
<h3 id="orga5af1bd"><span class="section-number-3">5.3.</span> Color Scheme</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Use the <code>doom-dracula</code> theme from the <a href="https://github.com/doomemacs/themes/tree/729ad034631cba41602ad9191275ece472c21941">Doom Themes</a> package.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'package-selected-packages 'doom-themes)
(load-theme 'doom-dracula t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga00aa87" class="outline-3">
<h3 id="orga00aa87"><span class="section-number-3">5.4.</span> Modeline</h3>
<div class="outline-text-3" id="text-5-4">
<p>
Use <a href="https://github.com/seagle0128/doom-modeline/tree/297b57585fe3b3de9e694512170c44c6e104808f">Doom Modeline</a> to display a nicer modeline. Mainly, it:
</p>

<ul class="org-ul">
<li>Uses more icons.</li>
<li>Displays a minimal amount of information while still keeping
important information such as:
<ul class="org-ul">
<li>Syntax errors</li>
<li>Version control information</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'package-selected-packages 'doom-themes)
(doom-modeline-mode t)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1448e58" class="outline-2">
<h2 id="org1448e58"><span class="section-number-2">6.</span> Editor Completions</h2>
<div class="outline-text-2" id="text-6">
<p>
Editor completions refers to auto complete done within the editor context, as
opposed to code. Editor completion is used to complete prompts for things such
as selecting a file, buffer, or command.
</p>
</div>
<div id="outline-container-orgf777027" class="outline-3">
<h3 id="orgf777027"><span class="section-number-3">6.1.</span> Ivy</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Editor completions are displayed using the <a href="https://github.com/abo-abo/swiper?tab=readme-ov-file#ivy">Ivy</a> package. This provides a huge
improvement over the default built-in Emacs completion.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'package-selected-packages 'ivy)
(ivy-mode t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orge93a936" class="outline-3">
<h3 id="orge93a936"><span class="section-number-3">6.2.</span> Counsel</h3>
<div class="outline-text-3" id="text-6-2">
<p>
<a href="https://github.com/abo-abo/swiper?tab=readme-ov-file#counsel">Counsel</a> provides functions that wrap ivy completion with some extra
features. For example, <code>counsel-M-x</code> is an <code>M-x</code> replacement that also displays
a keybinding if there is an active keybinding for the particular function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'package-selected-packages 'counsel)
(counsel-mode t)
</pre>
</div>

<p>
Enabling <code>counsel-mode</code> makes the <code>counsel-mode-map</code> keymap active. This keymap
defines several rebinds.
</p>


<p>
However, it does not provide a rebind for <code>counsel-switch-buffer</code>. We make this
our default (interactive) switch buffer command as it allows previewing the
contents of a buffer before switching.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(define-key counsel-mode-map (kbd <span style="color: #8b2252;">"C-x b"</span>) #'counsel-switch-buffer)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga9f7949" class="outline-2">
<h2 id="orga9f7949"><span class="section-number-2">7.</span> LSP</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org6b460af" class="outline-3">
<h3 id="org6b460af"><span class="section-number-3">7.1.</span> Background</h3>
<div class="outline-text-3" id="text-7-1">
<p>
The LanguageServerProtocol defines a way for a language server to communicate
programming language specific information for a project to an IDE(Emacs). The
protocol defines things such as syntax checking, autocomplete, and code
formatting.
</p>
</div>
</div>
<div id="outline-container-org4621dc4" class="outline-3">
<h3 id="org4621dc4"><span class="section-number-3">7.2.</span> Updating Eglot Package</h3>
<div class="outline-text-3" id="text-7-2">
<p>
Eglot is included in Emacs. However, Eglot can be upgraded to the latest version
with <code>M-x eglot-upgrade-eglot</code>.
</p>
</div>
</div>
<div id="outline-container-orgc45444a" class="outline-3">
<h3 id="orgc45444a"><span class="section-number-3">7.3.</span> Obtaining Language Servers</h3>
<div class="outline-text-3" id="text-7-3">
<p>
Eglot is configured to run the most popular language servers by
default. However, they must still be installed on the system. Some popular
language servers include <code>rust-analyzer</code> for Rust.
</p>
</div>
</div>
<div id="outline-container-org1f1cfbe" class="outline-3">
<h3 id="org1f1cfbe"><span class="section-number-3">7.4.</span> Enabling Eglot</h3>
<div class="outline-text-3" id="text-7-4">
<p>
Eglot can be manually enabled on a buffer with <code>M-x eglot</code>. To enable it
automatically, you may call <code>eglot-ensure</code> on the buffer automatically through
hooks.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'rust-mode-hook #'eglot-ensure)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org147c1d0" class="outline-2">
<h2 id="org147c1d0"><span class="section-number-2">8.</span> Formatting</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-orgb77b17d" class="outline-3">
<h3 id="orgb77b17d"><span class="section-number-3">8.1.</span> Tabs</h3>
<div class="outline-text-3" id="text-8-1">
<p>
Emacs uses a combination of tabs and spaces when auto-indenting. This pleases
neither the spaces nor tabs crowds. Tabs are disabled to prevent the mixed use,
though opinionated languages will still find a way to use their correct
default. For example, Go will still use tabs when indenting.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq-default</span> indent-tabs-mode nil)
</pre>
</div>

<p>
Use a default tab width of 4 spaces.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq-default</span> tab-width 4)
</pre>
</div>
</div>
</div>
<div id="outline-container-org4c6e6b8" class="outline-3">
<h3 id="org4c6e6b8"><span class="section-number-3">8.2.</span> Line Width</h3>
<div class="outline-text-3" id="text-8-2">
<p>
Set a target line width of 80. Contents of a "paragraph" may be made to follow
the target line width through <code>M-x fill-paragraph</code> (default keybind <code>M-q</code>) or a
highlighted region with <code>M-x fill-region</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq-default</span> fill-column 80)
</pre>
</div>

<p>
Some languages have a different target line length.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">fill-column-100</span> ()
  (<span style="color: #a020f0;">setq-local</span> fill-column 100))

(add-hook 'rust-mode-hook #'fill-column-100)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc0de00f" class="outline-3">
<h3 id="orgc0de00f"><span class="section-number-3">8.3.</span> Delete Trailing Whitespace</h3>
<div class="outline-text-3" id="text-8-3">
<p>
Trailing whitespace is usually unintended. These are whitespace characters
hanging at the end of the sentence or newlines/whitespace at the end of the
file. Trailing whitespace can be automatically deleted before save.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'before-save-hook #'delete-trailing-whitespace)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf88a19e" class="outline-3">
<h3 id="orgf88a19e"><span class="section-number-3">8.4.</span> Language Specific Autoformat</h3>
<div class="outline-text-3" id="text-8-4">
<p>
Eglot provides 2 functions for formatting.
</p>

<ul class="org-ul">
<li><code>eglot-format</code> - Formats the selected region.</li>
<li><code>eglot-format-buffer</code> - Format the current buffer.</li>
</ul>

<p>
However, running these functions interactively is not needed as we can
automatically run <code>eglot-format-buffer</code> before save.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">eglot-maybe-format-buffer</span> ()
  (<span style="color: #a020f0;">when</span> (eglot-managed-p) (eglot-format-buffer)))

(add-hook 'before-save-hook #'eglot-maybe-format-buffer)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org68ef613" class="outline-2">
<h2 id="org68ef613"><span class="section-number-2">9.</span> Code Auto-Complete</h2>
<div class="outline-text-2" id="text-9">
<p>
Code auto-complete is handled by the <a href="https://company-mode.github.io/">Company</a> package. Company is an
autocompletion frontend that comes with many backends. Company comes with a lot
of built-in backends and usually selects the best choice among them for
auto-complete suggestions. One of the more useful backends is the Eglot backend
which is automatically used if the buffer has Eglot mode enabled.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'package-selected-packages 'company)
</pre>
</div>

<p>
Company mode is usually fine to enable globally. If the buffer doesn't have a
suitable backend, then it does nothing.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-company-mode t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgaa83484" class="outline-2">
<h2 id="orgaa83484"><span class="section-number-2">10.</span> Languages</h2>
<div class="outline-text-2" id="text-10">
</div>
<div id="outline-container-org0b08594" class="outline-3">
<h3 id="org0b08594"><span class="section-number-3">10.1.</span> Rust</h3>
<div class="outline-text-3" id="text-10-1">
<p>
Rust is not built into Emacs so we install the <a href="https://github.com/rust-lang/rust-mode/tree/25d91cff281909e9b7cb84e31211c4e7b0480f94">Rust Mode</a> package.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'package-selected-packages 'rust-mode)
</pre>
</div>

<p>
Beyond that, there is not much to Rust as most of its functionality comes
throught Eglot + the <code>rust-analyzer</code> LSP.
</p>
</div>
</div>
<div id="outline-container-org7f149ae" class="outline-3">
<h3 id="org7f149ae"><span class="section-number-3">10.2.</span> Org Mode</h3>
<div class="outline-text-3" id="text-10-2">
<p>
Enable syntax highlighting for exported material html. Note that this will use
the currently active theme.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'package-selected-packages 'htmlize)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge7a83b3" class="outline-2">
<h2 id="orge7a83b3"><span class="section-number-2">11.</span> Elisp Concepts</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-orgdac3d8b" class="outline-3">
<h3 id="orgdac3d8b"><span class="section-number-3">11.1.</span> Interactive Commands</h3>
<div class="outline-text-3" id="text-11-1">
<p>
Interactive functions that can be run "interactively". Here, interactively maens
that they can be run through <code>M-x</code>. Interactive functions are defined by adding
(interactive) in their function definition.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-function</span> ()
  <span style="color: #8b2252;">"Do a thing."</span>
  (message <span style="color: #8b2252;">"Hello World"</span>))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-interactive-function</span> ()
  <span style="color: #8b2252;">"Do a thing."</span>
  (<span style="color: #a020f0;">interactive</span>)
  (message <span style="color: #8b2252;">"Hello World"</span>))
</pre>
</div>

<p>
Interactive functions also have a sophisticated mechanism of querying the user
for standard options and passing them as flags. See the <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Using-Interactive.html">Emacs Documentation</a> for
"Using interactive" for more details.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: will@wmedrano.dev</p>
<p class="date">Created: 2025-05-27 Tue 22:16</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
